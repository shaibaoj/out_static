function parseParams(t){try{var e,o=[];for(e in t){var i=encodeURIComponent(e),a=encodeURIComponent(t[e]);o.push(i+"="+a)}return o.join("&")}catch(t){return""}}function getUrlSearch(t,e){e=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),t=t.slice(t.indexOf("?")+1).match(e);if(null!=t)try{return decodeURIComponent(t[2])}catch(t){return null}return null}var vmTestInput={isPhoneNo:function(t){return"/^1[3456789]d{9}$/".test(t)},isNumber:function(t){return"/^[0-9]*$/".test(t)},isQQ:function(t){return"/^[1-9][0-9]{4,14}/".test(t)}},page=function(t,e){e=e||"",setTimeout(function(){window.location.href=t+".html"+e},50)},pageAll=function(t){setTimeout(function(){window.open(t)},50)};function Request(t){var e,o=location.href;if(-1!=o.indexOf(t))return e=o.indexOf(t),o.substring(e+t.length+1)}function obj2String(t,e=[],o=0){for(var i in t)e[o++]=[i,t[i]];return new URLSearchParams(e).toString()}var config={_url:"",urls:"/",isHTTP:function(){var t=window.location.protocol;return t.substring(0,t.length-1)},getUrl:function(t){var e=new RegExp("(https?|ftp|file|http)://[-A-Za-z0-9+&@@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@@#/%=~_|]","ig"),t=t.match(e);return null!=t?t:null},getVideoUrl:function(t){var e=new RegExp("(https?|ftp|file|http)://[-A-Za-z0-9+&@@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@@#/%=~_|]+.mp4","ig"),t=t.match(e);return null!=t?t:null},ImgSizeFun:function(t,e){for(var o=0;o<e.length;o++)t[o]=e[o]+config.ImgSize;return t}},ajaxGet=function(t,e,o,i){var a=function(t,e){},i=(i&&(a=i),obj2String(Object.assign(e,{hpt_times:web_config.hpt_times,hpt_sign:web_config.hpt_sign,hpt_token:web_config.token})));fetch(0===t.indexOf("http")?t:web_config.api_url+t+"?"+i,{method:"GET"}).then(t=>t.json()).then(o).catch((t,e)=>{a(t,e)})},ajaxPost=function(t,e,o,i){var a=function(t,e){},i=(i&&(a=i),obj2String(Object.assign(e,{hpt_times:web_config.hpt_times,hpt_sign:web_config.hpt_sign,hpt_token:web_config.token})));fetch(0===t.indexOf("http")?t:web_config.api_url+t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:i}).then(t=>t.json()).then(o).catch((t,e)=>{a(t,e)})},ajaxGetJsonp=function(t,e,o,i){i=i||function(t,e){};$.ajax({type:"GET",url:t,data:e,dataType:"jsonp",timeout:3e4,success:o,error:i,xhrFields:{withCredentials:!0}})};window.mobileUtil=function(){var t=navigator.userAgent,e=/android|adr|linux/gi.test(t),o=/iphone|ipod|ipad/gi.test(t)&&!e,i=/BlackBerry/i.test(t),a=/IEMobile/i.test(t),n=/WeiBo/gi.test(t),i=e||o||i||a,a=/Alipay/gi.test(t);return{isAndroid:e,isIOS:o,isMobile:i,isWeixin:/MicroMessenger/gi.test(t),isQQ:/ QQ/gi.test(t),isPC:!i,isWeiBo:n,isAlipay:a}}((window,document)),document.addEventListener("alpine:init",()=>{Alpine.data("goods",()=>({content:"",statusComment:0,showComment:!1,copyStatus:0,copyBtnText:"一键复制",viewComment(t,e){var o=this;0==o.statusComment&&(o.statusComment=1,ajaxPost("/api/common/goods/viewComment",{item_id:t,platform_type:e},function(t){t.data.content&&(o.content=t.data.content,o.statusComment=2)}))},copyContent(t){var e=this,o=new ClipboardJS(t,{target:function(t){return t.nextElementSibling}});o.on("success",function(t){t.clearSelection(),o.destroy(),e.copyStatus=2,e.copyBtnText="复制成功",console.log(t),setTimeout(()=>{e.copyStatus=0,e.copyBtnText="一键复制"},2e3)}),o.on("error",function(t){e.copyStatus=1,e.copyBtnText="复制失败",console.log(t),setTimeout(()=>{e.copyStatus=0,e.copyBtnText="一键复制"},2e3)})}}))}),function(){var t,e=window.dataUrls||[];for(t in e)ajaxPost(e[t].url,e[t].data,function(){});"undefined"!=typeof hljs&&hljs.highlightAll()}(),document.addEventListener("alpine:init",()=>{Alpine.data("detail",()=>({oCommon:{item_id:web_config.item_id,platform_type:web_config.platform_type,tianmao:"https://detail.tmall.com/item.htm",loadingImg:web_config.static_url+"/static/common/images/web/common/loading.png",adminPidlink:"/app/info-pid",adminLoginlink:"/app/login"},pid:{name:"",pid:"",items:[],weixinId:0,qqId:0},oPublic:{reportImg:"",loadingShow:!1,wholeShow:!1,setTimeoutClear:"",setTime:300,isDatanull:!1,offsetTop:""},publicList:{productList:[],pageNumber:1,pageInput:1,count:""},oItemData:{itemInfo:{goods:{},store:{},coupon:{},price:{}},picIndex:1,sellerId:"",item_id:"",platform_type:0,taobaoImage:[],strWeixinArr:[],strFriendsArr:[],strPosterArr:[],videoImg:"",videoLink:"",imgArr:[],videoHide:!0,strShorttitle:"",strDesc:"",swiperIndex:0,friendsIndex:0,wholeShow:!1,material_id:0,material_info:[]},taobaoComment:{taobaoDataArr:[],taobaoPage:1,taobaoCount:"",taobaoCountSign:0,loadmsg:!0,taobaoLabel:[]},oHistory:{IndexShow:0,descRecommend:"",salesRecord:"",shorttitleRecommend:"",shorttitleShow:!1,descRecommendShow:!1},oSetting:{modalWeixin:!1,modalQQ:!1,modalPid:!1,modalWenan:!1,showContent:!1,copyStatus:0,copyBtnText:"一键复制",nav:1,templateType:1,qq:{default:"",brand:"",custom:"",token:"{淘口令}",link:"{二合一短链接}",url:"{二合一长链接}",status:0,id:0,pid:"",pidName:"",relation_id:null,show:!1},weixin:{default:"",brand:"",custom:"",token:"{淘口令}",link:"{二合一短链接}",url:"{二合一长链接}",status:0,qrcode:web_config.static_url+"/static/common/images/web/detail/detail_default_qrimg.png",id:0,pid:"",pidName:"",relation_id:null,show:!1,linkChecked:!1,qrcodeChecked:!1},other:{id:0,pid:"",pidName:"",relation_id:null},friend:{qrcodeView:!0},poster:{picUrl1:"",picUrl2:""},comwxqqnav:[{number:0,name:"修改微信文案",bool:!0},{number:1,name:"修改QQ文案",bool:!0}],wxqqIndex:0,listArrWx:[{name:"短标题"},{name:"介绍"},{name:"店铺类型"},{name:"原价"},{name:"券后价"},{name:"销量"},{name:"佣金比例"},{name:"领券链接"},{name:"券满"},{name:"券额"},{name:"优惠券剩余数量"},{name:"优惠券有效限期"},{name:"二合一长链接"},{name:"二合一短链接"},{name:"淘口令"}],listArrQq:[{name:"短标题"},{name:"介绍"},{name:"店铺类型"},{name:"原价"},{name:"券后价"},{name:"销量"},{name:"佣金比例"},{name:"领券链接"},{name:"券满"},{name:"券额"},{name:"优惠券剩余数量"},{name:"优惠券有效限期"},{name:"二合一长链接"},{name:"二合一短链接"},{name:"淘口令"}]},oVideo:{playBool:!1,videooIndex:-1,pLink:" 0",oVoice:!0,videoData:[],oTime:0,videoitemId:"",IndexSave:"",loadIcon:!1,videosetClear:"",videooneIcon:!1},dataTime:{itemType:0,endtime:"",hours:"00",Minutes:"00",Seconds:"00",oClearInterval:"",countBoll:!0},oEchartToday:{check_hour:"",sale:[],saletime:[],tabShow:0,historyprice:[],historyMinprice:"",historytime:[]},copyImg(t){return"https://img.marsnews.work/imgcdn/"+MD5(t)+".jpg?src="+encodeURIComponent(t)},ajaxInfo(){var a=this;ajaxPost("/api/common/goods/view",{item_id:a.oCommon.item_id,platform_type:a.oCommon.platform_type},function(t){if(0==t.code){a.oItemData.itemInfo=t.data.item,a.oItemData.sellerId=a.oItemData.itemInfo.goods.seller_id,a.oItemData.item_id=a.oItemData.itemInfo.goods.item_id,a.oItemData.platform_type=a.oItemData.itemInfo.goods.platform_type;var e=a.oItemData.itemInfo.goods.pic_urls;if(e)for(const i of e)a.oItemData.taobaoImage.push(i);if(e&&a.oItemData.strWeixinArr.push(a.oItemData.taobaoImage[a.oItemData.taobaoImage.length-1]),e)for(var o=0;o<e.length;o++)a.oItemData.strFriendsArr.push(e[o]);e&&a.oItemData.strPosterArr.push(a.oItemData.taobaoImage[0]),a.oItemData.itemInfo.videos&&(a.oItemData.videoImg=a.oItemData.itemInfo.videos.pic_url,a.oItemData.videoLink=a.oItemData.itemInfo.videos.url),a.oItemData.strShorttitle=a.oItemData.itemInfo.goods.d_title,a.oItemData.strShorttitle||(a.oItemData.strShorttitle=a.oItemData.itemInfo.goods.title),a.oItemData.strDesc=a.oItemData.itemInfo.goods.description,null==a.oItemData.strDesc&&(a.oItemData.strDesc=""),a.dataTime.endtime=a.oItemData.itemInfo.start_time,a.dataTime.itemType=a.oItemData.itemInfo.item_type,0<a.dataTime.itemType&&a.FunCountDown(),a.$nextTick(function(){a.oItemData.wholeShow=!0,a.ajaxComment(!0),a.ajaxhistory(),a.ajaxTodaySales(),a.ajaxset()})}else console.log(t.message)}),this.queryPid()},ajaxhistory(){var o=this;ajaxPost("/api/common/goods/history",{item_id:o.oItemData.item_id,platform_type:o.oItemData.platform_type},function(t){t.data.content&&"1"==t.data.content.status&&(o.oHistory.salesRecord=t.data.content.sales_record,o.oItemData.taobaoImage=o.oItemData.taobaoImage.concat(t.data.content.more_copyimage),o.oHistory.shorttitleRecommend=t.data.content.itemshorttitle_recommend,o.oHistory.descRecommend=t.data.content.itemdesc_recommend,o.$nextTick(function(){o.oHistory.salesRecord.forEach(function(t,e){o.oEchartToday.historyprice.push(parseFloat(t.itemendprice)),o.oEchartToday.historytime.push(t.time.substring(5,t.time.length))}),o.oEchartToday.historyMinprice=Math.min.apply(Math,o.oEchartToday.historyprice)}))})},echartOption(t,e,o){var i=document.getElementById("echartToday"),a=echarts.init(i),n={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#4D75FF"}}},grid:{top:"25",left:"5",right:"25",bottom:"0px",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:t}],yAxis:[{type:"value"}],series:[{name:o,type:"line",stack:"总量",label:{normal:{show:!0,position:"top"}},itemStyle:{normal:{color:"#4D75FF"}},lineStyle:{normal:{color:"#4D75FF"}},data:e}]};setTimeout(function(){a.setOption(n,!0)},50)},tabBtn(t){var e=this;switch(t){case 0:e.echartOption(e.oEchartToday.saletime,e.oEchartToday.sale,"日销量");break;case 1:e.echartOption(e.oEchartToday.historytime,e.oEchartToday.historyprice,"历史价格")}this.oEchartToday.tabShow=t},ajaxTodaySales(){var e=this;ajaxPost("/api/common/goods/get_today_sales",{item_id:e.oItemData.item_id,platform_type:e.oItemData.platform_type},function(t){"1"==t.data.content.status&&(t=t.data.content.data,e.oEchartToday.check_hour=t.check_hour,e.oEchartToday.saletime=t.saletime,e.oEchartToday.sale=t.sale,e.echartOption(e.oEchartToday.saletime,e.oEchartToday.sale,"日销量"))})},countDown(t){function e(t){return(t=t.toString())[1]?t:"0"+t}var o=this,i={},t=1e3*Number(t)-Number((new Date).getTime());0<=t?(i.d=Number(Math.floor(t/864e5)),o.dataTime.hours=Number(e(parseInt(t/1e3/3600%24)))+24*i.d,o.dataTime.Minutes=e(parseInt(t/1e3/60%60)),o.dataTime.Seconds=e(parseInt(t/1e3%60))):(o.dataTime.countBoll=!1,o.dataTime.hours="00",o.dataTime.Minutes="00",o.dataTime.Seconds="00",clearInterval(o.dataTime.oClearInterval))},FunCountDown(){var t=this;t.dataTime.oClearInterval=setInterval(function(){t.countDown(t.dataTime.endtime)},1e3)},ajaxVideo(){var e=this;ajaxPost("/api/common/goods/trill_video_list",{item_id:e.oItemData.item_id,platform_type:e.oItemData.platform_type,p:e.publicList.pageNumber},function(t){"1"==t.data.content.status&&(e.publicList.productList=t.data.content.data,e.publicList.count=t.data.content.count)})},adderImg(t){},adderImg1(t){},copyBtn(t,e){var o=new ClipboardJS(t,{target(){return document.querySelector(e)}});o.on("success",function(t){console.log("复制成功"),t.clearSelection(),o.destroy()}),o.on("error",function(t){console.log("由于您的浏览器不兼容或当前网速较慢，复制失败，请手动复制或更换主流浏览器！")})},seeVideo(t){},seetcomment(){0<this.taobaoComment.taobaoCount?(this.ajaxRatelabel(),this.taobaoscroll()):console.log("没有评论哦")},ajaxComment(e){var o=this;ajaxPost("/api/common/goods/get_ratelist",{item_id:o.oItemData.item_id,platform_type:o.oItemData.platform_type,pageno:o.taobaoComment.taobaoPage,pagesize:10},function(t){"1"==t.data.content.status&&(o.taobaoComment.taobaoDataArr=o.taobaoComment.taobaoDataArr.concat(t.data.content.data),o.taobaoComment.taobaoCountSign=t.data.content.count,o.taobaoComment.taobaoPage<=parseInt(o.taobaoComment.taobaoCountSign/10)?(o.taobaoComment.taobaoPage+=1,o.taobaoComment.loadmsg=!0):o.taobaoComment.loadmsg=!1,o.$nextTick(function(){e&&(o.taobaoComment.taobaoCount=t.data.content.count)}))})},taobaoscroll(){var t,e,o=this,i=$(".popup-taobao-comment").height();$(".popup-taobao-comment").scroll(function(){t=$(this)[0].scrollHeight,e=$(this)[0].scrollTop,parseInt(e+i)+10>=t&&o.taobaoComment.loadmsg&&(o.taobaoComment.loadmsg=!1,o.ajaxComment())})},ajaxRatelabel(){var e=this,t="https://rate.tmall.com/listTagClouds.htm?itemId="+e.oItemData.item_id+"&isAll=true&isInner=true&t=1570446988539&groupId=&_ksTS=1570446988540_680";ajaxGetJsonp(t,{},function(t){t.tags.tagClouds&&(e.taobaoComment.taobaoLabel=t.tags.tagClouds)})},ajaxGetVideo(){var r=this,t="https://h5api.m.taobao.com/h5/mtop.taobao.detail.getdetail/6.0/?jsv=2.4.8&appKey=12574478&t=1554712612690&sign=59ff83eeadc620f65b072a198f4cf178&api=mtop.taobao.detail.getdetail&v=6.0&dataType=jsonp&ttid=2017%40taobao_h5_6.6.0&AntiCreep=true&type=jsonp&data=%7B%22itemNumId%22%3A%22"+r.oItemData.item_id+"%22%7D";ajaxGetJsonp(t,{},function(t){var e,o=[];if(t.data.apiStack){for(var i=t.data.apiStack,a=i.length;a--;){if(!(e=JSON.parse(i[a].value).item.videos))return console.log("没有商品视频哦"),void(r.oItemData.videoHide=!1);for(var n=e.length;n--;)o.unshift(e[n])}if(o.length<=0)return console.log("没有商品视频哦"),void(r.oItemData.videoHide=!1);r.$nextTick(function(){for(const t of o)r.oItemData.videoLink=t.url,r.oItemData.videoImg=t.videoThumbnailURL})}else console.log("点击立即跳转到淘宝去拉动滑动条或登录才能获取到实拍视频哦"),pageAll(t.data.url)})},loginFun(){var t=encodeURIComponent(encodeURIComponent(window.location.href));this.oCommon.adminLoginlink;w},picBtn(){var t="/tools/spic?shopUrl=https://item.taobao.com/item.htm?id="+this.oItemData.item_id;pageAll(t)},tljBtn(){var t="/app/market-lj?href=https://item.taobao.com/item.htm?id="+this.oItemData.item_id;pageAll(t)},wxBtn(){var t="/tools/wx?href=https://item.taobao.com/item.htm?id="+this.oItemData.item_id;pageAll(t)},shorttitleBtn(t){this.oItemData.strShorttitle=t,this.oHistory.shorttitleShow=!1},descRecommendBtn(t){this.oItemData.strDesc=t,this.oHistory.descRecommendShow=!1},choiceBtn(t,e,o){var i;1==t?0!=this.oItemData.strWeixinArr.length&&0<=(i=this.oItemData.strWeixinArr.indexOf(e))?this.oItemData.strWeixinArr.splice(i,1):this.oItemData.strWeixinArr.push(e):2==t?0!=this.oItemData.strFriendsArr.length&&0<=(i=this.oItemData.strFriendsArr.indexOf(e))?this.oItemData.strFriendsArr.splice(i,1):this.oItemData.strFriendsArr.push(e):3==t?(this.oItemData.strPosterArr=[],this.oItemData.strPosterArr.push(e)):0==t&&(this.oSetting.friend.qrcodeView=!this.oSetting.friend.qrcodeView)},ajaxset(){var o=this;ajaxPost("/api/common/stat/get_setting_info",{},function(t){var e;0==t.code&&(e=t.data.setting_data,o.oSetting.qq.default=e.content_qq_default,o.oSetting.qq.brand=e.content_qq_default,o.oSetting.qq.custom=e.content_qq,o.oSetting.weixin.default=e.content_default,o.oSetting.weixin.brand=e.content_default,o.oSetting.weixin.custom=e.content_weixin,o.oSetting.weixin.id=t.data.weixin_id,o.oSetting.qq.id=t.data.qq_id,o.oSetting.other.id=t.data.other_id,o.pid.items=t.data.items,o.setValPid())})},filtersContent(t){var e=this,o=t.default;return 2==e.oSetting.templateType?o=t.brand:3==e.oSetting.templateType&&(o=t.custom),o=(o=(o=null==o?"":o).replace(/\{标题\}/g,e.oItemData.strShorttitle)).replace(/\{短标题\}/g,e.oItemData.strShorttitle),o=(o=e.oItemData.itemInfo&&e.oItemData.itemInfo.price&&e.oItemData.itemInfo.price.price?(o=o.replace(/\{在售价\}/g,parseFloat(e.oItemData.itemInfo.price.price))).replace(/\{券后价\}/g,"<span>"+parseFloat(e.oItemData.itemInfo.price.buy_price)+"</span>"):o).replace(/\{推荐语\}/g,e.oItemData.strDesc),o=(o=e.oItemData.itemInfo&&e.oItemData.itemInfo.coupon&&e.oItemData.itemInfo.price.coupon_money?o.replace(/\{券额\}/g,"<span>"+parseFloat(e.oItemData.itemInfo.coupon.coupon_money)+"</span>"):o).replace(/\{图片\}/g,""),o=(o=(o=(o=(o=(o=(o=""!=t.token||""!=t.link?o.replace(/\{介绍\}/g,e.oItemData.strDesc):o.replace(/\{介绍\}/g,"文案")).replace(/\{淘口令\}/g,"<span>"+t.token+"</span>")).replace(/\{二合一\}/g,"<span>"+t.link+"</span>")).replace(/\{二合一长链接\}/g,"<span>"+t.url+"</span>")).replace(/\{二合一短链接\}/g,"<span>"+t.link+"</span>")).replace(/\{二合一淘点金短链接\}/g,"<span>"+t.link+"</span>")).replace(/\{二合一淘口令\}/g,"<span>"+t.token+"</span>")},shutBtn(){this.wxqqnavReset()},wxqqnavReset(){this.oSetting.wxqqIndex=0,this.oSetting.comwxqqnav[0].bool=!0,this.oSetting.comwxqqnav[1].bool=!0},popupwxqqBtn(t){(0==t||1==t)&&""==web_config.token?this.loginFun():this.oSetting.wxqqIndex=t},customizedAdd(t,e){("wx"==e?document.getElementById("textareaWx"):document.getElementById("textareaQq")).focus(),this.insertAtCaret("{"+t.name+"}")},insertAtCaret(t){var e,o;if(window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount){(o=e.getRangeAt(0)).deleteContents();for(var i,a,n=document.createElement("div"),r=(n.innerHTML=t,document.createDocumentFragment());i=n.firstChild;)a=r.appendChild(i);o.insertNode(r),a&&((o=o.cloneRange()).setStartAfter(a),o.collapse(!0),e.removeAllRanges(),e.addRange(o))}}else document.selection&&"Control"!=document.selection.type&&document.selection.createRange().pasteHTML(t)},templateDefault(t){"wx"==t?document.getElementById("textareaWx").innerHTML=this.oSetting.weixin.default:document.getElementById("textareaQq").innerHTML=this.oSetting.qq.default},saveTemplateBtn(e,t){var o=this,i="";""!=(i=("wx"==t?document.getElementById("textareaWx"):document.getElementById("textareaQq")).innerHTML)&&ajaxPost("/api/user/info/template/updateItem",{share_set:e,set_content:i},function(t){"1"==t.status?(console.log(t.message),o.wxqqnavReset(),o.ajaxset()):(console.log(t.message),o.wxqqnavReset()),1==e?o.oSetting.weixin.custom=i:o.oSetting.qq.custom=i},function(){o.wxqqnavReset()})},templateCelarBtn(t){"wx"==t?document.getElementById("textareaWx").innerHTML="":document.getElementById("textareaQq").innerHTML=""},setPidBtn(t,e){"wx"==e?(this.oSetting.weixin.pid=t.pid,this.oSetting.weixin.pidName=t.pid_name,this.oSetting.weixin.relation_id=t.relation_id,this.oSetting.weixin.id=t.id,this.oSetting.weixin.show=!1):(this.oSetting.qq.pid=t.pid,this.oSetting.qq.pidName=t.pid_name,this.oSetting.qq.relation_id=t.relation_id,this.oSetting.qq.id=t.id,this.oSetting.qq.show=!1)},taobaoTokenBtn(e,o,t){var i,a,n=this;switch(e){case 1:i=n.oSetting.qq.relation_id,a=n.oSetting.qq.pid,n.oSetting.qq.status=1;break;case 0:case 2:i=n.oSetting.weixin.relation_id,a=n.oSetting.weixin.pid,n.oSetting.weixin.status=1;break;case 3:case 4:i=n.oSetting.weixin.relation_id,a=n.oSetting.weixin.pid}3!=e&&4!=e||""==n.oSetting.weixin.qrcode?ajaxPost("/api/common/goods/transform",{type:e,activity_id:n.oItemData.itemInfo.coupon.activity_id,item_id:n.oItemData.item_id,platform_type:n.oItemData.platform_type,title:n.oItemData.itemInfo.goods.title,itempic:n.oItemData.itemInfo.goods.pic_url,relationid:i,pid:a},function(t){0==t.code?(1==e?(t.data.goods.click.password_token&&(n.oSetting.qq.token=t.data.goods.click.password_token),t.data.goods.click.short_url&&(n.oSetting.qq.link=t.data.goods.click.short_url),t.data.goods.click.url&&(n.oSetting.qq.url=t.data.goods.click.url)):(t.data.goods.click.password_token&&(n.oSetting.weixin.token=t.data.goods.click.password_token),t.data.goods.click.short_url&&(n.oSetting.weixin.link=t.data.goods.click.short_url),t.data.goods.click.url&&(n.oSetting.weixin.url=t.data.goods.click.url),t.data.goods.click.qrcode&&(n.oSetting.weixin.qrcode=t.data.goods.click.qrcode)),0==e?(n.oSetting.weixin.status=2,document.querySelector(o).click()):1==e?(n.oSetting.qq.status=2,document.querySelector(o).click()):2==e&&(n.oSetting.weixin.status=2),3==e?(n.oSetting.weixin.status=2,n.unitePic(".poster1",".copy_poster_hide1",function(t){n.oSetting.poster.picUrl1=t.img})):4==e&&(n.oSetting.weixin.status=2,n.unitePic(".poster2",".copy_poster_hide2",function(t){n.oSetting.poster.picUrl2=t.img}))):console.log(t.message)},function(){console.log("网络错误，请重新检查网络！")}):3==e?n.unitePic(".poster1",".copy_poster_hide1",function(t){n.oSetting.poster.picUrl1=t.img}):4==e&&n.unitePic(".poster2",".copy_poster_hide2",function(t){n.oSetting.poster.picUrl2=t.img})},PidFun(){console.log("未设置pid,请前往个人中心设置pid!"),pageAll(this.oCommon.adminPidlink)},friendsBtn(t){this.oItemData.friendsIndex+=t},seeImg(t){},videoPlayBtn(t){var e=this;e.oVideo.videooIndex=t,setTimeout(function(){var t=e.$refs.myVideo[0];null!=t&&(null==t.error?(t.play(),e.$refs.myVideo[0].addEventListener("waiting",function(){e.oVideo.videooneIcon?e.oVideo.videosetClear=setTimeout(function(){e.oVideo.videooneIcon=!1,e.oVideo.loadIcon=!0},100):e.oVideo.loadIcon=!0}),e.$refs.myVideo[0].addEventListener("playing",function(){e.oVideo.loadIcon=!1})):e.oVideo.playBool=!1,t.addEventListener("play",function(){e.videoEnd(),e.oVideo.playBool=!0}))},100)},videostopBtn(){var t=this;this.$refs.myVideo[0].pause(),this.$refs.myVideo[0].addEventListener("pause",function(){t.oVideo.playBool=!1,t.oVideo.loadIcon=!1})},videoEnd(){var t=this;t.$refs.myVideo[0].addEventListener("ended",function(){t.$refs.myVideo[0].pause(),t.oVideo.playBool=!1})},videoExtendBtn(){this.oDyvideo.videoExtend=!1},videomoveinIcon(t,e){},setTemplateType(t){this.oSetting.templateType=t},unitePic(t,o,i){html2canvas(document.querySelector(t),{allowTaint:!1,useCORS:!0,logging:!0}).then(function(t){var t=t.toDataURL("image/png",1),e=new Image;e.src=t,document.querySelector(o).append(e),i({img:t})})},downImgMake(t){this.downloadIamge(t,Math.round(1e3*Math.random()))},downloadIamge(t,i){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var t=document.createElement("canvas"),e=(t.width=a.width,t.height=a.height,t.getContext("2d").drawImage(a,0,0,a.width,a.height),t=t.toDataURL("image/png"),document.createElement("a")),o=new MouseEvent("click");e.download=i||"图片",e.href=t,e.dispatchEvent(o)},a.src=t},copyContent(t){var e=this,o=new ClipboardJS(t,{target:function(t){return t.nextElementSibling}});o.on("success",function(t){t.clearSelection(),o.destroy(),e.oSetting.copyStatus=2,e.oSetting.copyBtnText="复制成功",console.log(e.oSetting.copyBtnText),setTimeout(()=>{e.oSetting.copyStatus=0,e.oSetting.copyBtnText="一键复制"},2e3)}),o.on("error",function(t){e.oSetting.copyStatus=1,e.oSetting.copyBtnText="复制失败",setTimeout(()=>{e.oSetting.copyStatus=0,e.oSetting.copyBtnText="一键复制"},2e3)})},addPid(){var t=this;ajaxPost("/api/user/market/resource/update",{name:t.pid.name,pid:t.pid.pid,type:"pid"},function(){t.queryPid()})},queryPid(){var e=this;ajaxPost("/api/user/market/resource/list",{type:"pid"},function(t){t.data&&t.data.items&&(e.pid.items=t.data.items,e.pid.name="",e.pid.pid="")})},delPid(t){var e=this;ajaxPost("/api/user/market/resource/delete",{id:t},function(){e.queryPid()})},selPid(t,e){var o={};1==t?(o=Object.assign(o,{weixin_id:e}),this.oSetting.weixin.show=!1,this.oSetting.weixin.id=e,this.setValPid()):2==t&&(o=Object.assign(o,{qq_id:e}),this.oSetting.qq.show=!1,this.oSetting.qq.id=e,this.setValPid()),ajaxPost("/api/user/user/pid/update",o,function(){})},setValPid(){var o=this;o.pid.items.forEach(function(t,e){t.id==o.oSetting.weixin.id?(o.oSetting.weixin.pid=t.pid,o.oSetting.weixin.pidName=t.name,o.oSetting.weixin.relation_id=t.relation_id):t.id==o.oSetting.qq.id?(o.oSetting.qq.pid=t.pid,o.oSetting.qq.pidName=t.name,o.oSetting.qq.relation_id=t.relation_id):t.id==o.oSetting.other.id&&(o.oSetting.other.pid=t.pid,o.oSetting.other.pidName=t.name,o.oSetting.other.relation_id=t.relation_id)}),0==o.oSetting.weixin.id&&0<o.oSetting.qq.id&&(o.oSetting.weixin.id=o.oSetting.qq.id,o.oSetting.weixin.pid=o.oSetting.qq.pid,o.oSetting.weixin.pidName=o.oSetting.qq.pidName,o.oSetting.weixin.relation_id=o.oSetting.qq.relation_id),0==o.oSetting.qq.id&&0<o.oSetting.weixin.id&&(o.oSetting.qq.id=o.oSetting.weixin.id,o.oSetting.qq.pid=o.oSetting.weixin.pid,o.oSetting.qq.pidName=o.oSetting.weixin.pidName,o.oSetting.qq.relation_id=o.oSetting.weixin.relation_id),0==o.oSetting.qq.id&&0==o.oSetting.weixin.id&&0<o.oSetting.other.id&&(o.oSetting.qq.id=o.oSetting.other.id,o.oSetting.qq.pid=o.oSetting.other.pid,o.oSetting.qq.pidName=o.oSetting.other.pidName,o.oSetting.qq.relation_id=o.oSetting.other.relation_id,o.oSetting.weixin.id=o.oSetting.other.id,o.oSetting.weixin.pid=o.oSetting.other.pid,o.oSetting.weixin.pidName=o.oSetting.other.pidName,o.oSetting.weixin.relation_id=o.oSetting.other.relation_id)}}))});